<!DOCTYPE html>
<html>
<head><title>ImgBB Browser Test</title></head>
<body>
  <h1>ImgBB Browser Upload Test</h1>
  <p>Open DevTools (F12) → Console to see results.</p>
  <button id="test">Test Upload</button>
  <pre id="out"></pre>
  <script type="module">
    // Set window.IMGBB_KEY in console, or paste when prompted
    const apiKey = window.IMGBB_KEY || prompt('Paste VITE_IMGBB_API_KEY from .env.local:');
    const PNG_BASE64 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8BQwAACYwCg+0K8XwAAAABJRU5ErkJggg==';

    document.getElementById('test').onclick = async () => {
      const out = document.getElementById('out');
      out.textContent = 'Uploading...';
      try {
        const form = new FormData();
        form.append('image', PNG_BASE64);
        const res = await fetch(`https://api.imgbb.com/1/upload?key=${apiKey}`, {
          method: 'POST',
          body: form,
        });
        const json = await res.json();
        out.textContent = JSON.stringify(json, null, 2);
        if (json.success) {
          console.log('✓ Upload OK:', json.data.url);
        } else {
          console.error('✗ Upload failed:', json);
        }
      } catch (e) {
        out.textContent = 'Error: ' + e.message;
        console.error('Request failed:', e);
      }
    };
  </script>
</body>
</html>
